{% extends 'base.html' %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<h1>
  {{ post.title }} |
  <span><small>Posted {{ post.created_at|timesince }} ago</small></span>
</h1>

<span>
  <a href="{% url 'post_update' post.pk %}">Edit</a> | 
  <a href="{% url 'post_delete' post.pk %}">Delete</a>
</span>

<p>{{ post.body }}</p>

<hr>

<!-- Comments Section -->
<div class="comments-section">
  <h2>Comments</h2>
  
  {% if comments %}
    {% for comment in comments %}
      <div class="comment-card">
        <div class="comment-header">
          <strong>{{ comment.name }}</strong>
          <small>{{ comment.created_at|date:"M. d, Y, g:i a" }}</small>
        </div>
        <p class="comment-body">{{ comment.body }}</p>
      </div>
    {% endfor %}
  {% else %}
    <p>No comments yet. Be the first to comment!</p>
  {% endif %}
</div>

<!-- Comment Form -->
<div class="comment-form">
  <h3>Leave a comment</h3>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Submit</button>
  </form>
</div>
{% endblock %}
